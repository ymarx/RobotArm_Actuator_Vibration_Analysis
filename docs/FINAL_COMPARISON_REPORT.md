# ìµœì¢… ë¹„êµ ë³´ê³ ì„œ: í’ˆì§ˆ ê¸°ì¤€ ì¡°ì • ì „í›„

**ë‚ ì§œ**: 2025-11-17
**ëª©ì **: 200W ì œí’ˆì˜ ë” ê¸´ ì¸¡ì • ì‹œê°„ì„ ë°˜ì˜í•œ í’ˆì§ˆ ê¸°ì¤€ ì¡°ì • íš¨ê³¼ ê²€ì¦

---

## ğŸ“Š í•µì‹¬ ê°œì„  ì‚¬í•­

| í•­ëª© | ì¡°ì • ì „ (v0) | ì¡°ì • í›„ (v1) | ê°œì„  |
|------|-------------|-------------|------|
| **í’ˆì§ˆ í†µê³¼ íŒŒì¼** | 31/60 (51.7%) | **57/60 (95.0%)** | **+26 files** |
| **100W í†µê³¼** | 30/30 (100%) | 30/30 (100%) | - |
| **200W í†µê³¼** | 1/30 (3.3%) | **27/30 (90.0%)** | **+26 files** |

---

## ğŸ”§ ì ìš©ëœ ì¡°ì • ì‚¬í•­

### 1. í’ˆì§ˆ ê¸°ì¤€ íŒŒë¼ë¯¸í„° ìˆ˜ì •

**ë³€ê²½ ì „** (`params_eda.yaml`):
```yaml
quality:
  file_length:
    expected_samples: [27000, 29000]  # ë‹¨ì¼ ê¸°ì¤€
    tolerance_ratio: 0.1
```

**ë³€ê²½ í›„**:
```yaml
quality:
  file_length:
    expected_samples:
      "100W": [27000, 29000]  # ~53-57ì´ˆ
      "200W": [32000, 36000]  # ~62-68ì´ˆ (ë” ê¸´ ì¸¡ì •ì‹œê°„ í—ˆìš©)
    tolerance_ratio: 0.1  # Â±10%
```

### 2. ì½”ë“œ ìˆ˜ì •

**íŒŒì¼**: `src/preprocess/quality.py` - `create_quality_report()`

**í•µì‹¬ ë¡œì§**:
```python
# Get product from file_id (100W or 200W)
product = file_id.split('_')[0]

# Extract product-specific expected length
expected_samples = params.get('file_length', {}).get('expected_samples', [27000, 29000])
if isinstance(expected_samples, dict):
    # Product-specific configuration
    qc_params['expected_length'] = expected_samples.get(product, [27000, 29000])
else:
    # Legacy single-value configuration
    qc_params['expected_length'] = expected_samples
```

---

## ğŸ“ˆ ìƒì„¸ ë¹„êµ ë¶„ì„

### 100W ì œí’ˆ

| ì§€í‘œ | v0 | v1 | ë¹„ê³  |
|------|-----|-----|------|
| ì´ íŒŒì¼ ìˆ˜ | 30 | 30 | - |
| í†µê³¼ íŒŒì¼ ìˆ˜ | 30 | 30 | ë³€í™” ì—†ìŒ (ì´ë¯¸ 100% í†µê³¼) |
| ìƒ˜í”Œ ìˆ˜ ë²”ìœ„ | 27,552 ~ 30,740 | ë™ì¼ | - |
| ì¸¡ì • ì‹œê°„ | ~53-60ì´ˆ | ë™ì¼ | - |

**ê²°ë¡ **: 100WëŠ” ê¸°ì¡´ ê¸°ì¤€ì—ì„œë„ ëª¨ë‘ í†µê³¼í–ˆìœ¼ë¯€ë¡œ ë³€í™” ì—†ìŒ âœ…

---

### 200W ì œí’ˆ

| ì§€í‘œ | v0 | v1 | ê°œì„  |
|------|-----|-----|------|
| ì´ íŒŒì¼ ìˆ˜ | 30 | 30 | - |
| í†µê³¼ íŒŒì¼ ìˆ˜ | 1 | **27** | **+26** |
| ì‹¤íŒ¨ íŒŒì¼ ìˆ˜ | 29 | **3** | **-26** |
| ìƒ˜í”Œ ìˆ˜ ë²”ìœ„ | 30,917 ~ 59,462 | ë™ì¼ | - |
| ì¸¡ì • ì‹œê°„ | ~60-116ì´ˆ | ë™ì¼ | - |

**í†µê³¼ìœ¨ í–¥ìƒ**: 3.3% â†’ **90.0%** (ğŸš€ 2,600% ê°œì„ )

---

### ì—¬ì „íˆ ì‹¤íŒ¨í•˜ëŠ” 3ê°œ íŒŒì¼

| íŒŒì¼ ID | ìƒ˜í”Œ ìˆ˜ | ì˜ˆìƒ ë²”ìœ„ (Â±10%) | ìƒíƒœ | ì´ìœ  |
|---------|---------|-----------------|------|------|
| 200W_S02_CW_R4 (ì²« ë²ˆì§¸) | **59,462** | 28,800~39,600 | âŒ | ë¹„ì •ìƒì ìœ¼ë¡œ ê¸º (ì•½ 116ì´ˆ) |
| 200W_S02_CW_R4 (ë‘ ë²ˆì§¸) | **43,689** | 28,800~39,600 | âŒ | ê¸°ì¤€ ì´ˆê³¼ (ì•½ 85ì´ˆ) |
| 200W_S02_CW_R4 (ì„¸ ë²ˆì§¸) | **43,689** | 28,800~39,600 | âŒ | ê¸°ì¤€ ì´ˆê³¼ (ì•½ 85ì´ˆ) |

**ë¶„ì„**:
- ëª¨ë‘ **200W Sample02** íŒŒì¼
- ì •ìƒ ë²”ìœ„(32k-36k)ë³´ë‹¤ í›¨ì”¬ í° ìƒ˜í”Œ ìˆ˜
- ë°ì´í„° ìˆ˜ì§‘ ê³¼ì •ì—ì„œ ë¬¸ì œê°€ ìˆì—ˆì„ ê°€ëŠ¥ì„±
- **ê¶Œì¥**: Sample02 íŒŒì¼ì€ ë¶„ì„ì—ì„œ ì œì™¸í•˜ê±°ë‚˜ ë³„ë„ ê²€í†  í•„ìš”

---

## ğŸ¯ ë°ì´í„° ëˆ„ìˆ˜ ê²€ì¦ ê²°ê³¼

### 5ê°€ì§€ ê²€ì¦ í•­ëª© ëª¨ë‘ í†µê³¼ âœ…

| ê²€ì¦ í•­ëª© | ê²°ê³¼ | ë¹„ê³  |
|-----------|------|------|
| 1. íŒŒì¼ ë‹¨ìœ„ ë°ì´í„° ëˆ„ìˆ˜ | âœ… í†µê³¼ | 4ê°œ time_split íŒŒì¼ë§Œ ì˜ë„ì ìœ¼ë¡œ ë¶„í•  |
| 2. ì‹œê°„ ê¸°ë°˜ ë¶„í•  ê²½ê³„ ì¤€ìˆ˜ | âœ… í†µê³¼ | Train: 0-60%, Val: 60-80%, Test: 80-100% |
| 3. CW/CCW ë°©í–¥ ì¼ê´€ì„± | âœ… í†µê³¼ | ëª¨ë“  íŒŒì¼ì´ ë‹¨ì¼ ë°©í–¥ ìœ ì§€ |
| 4. Balancing í›„ Val/Test ë…ë¦½ì„± | âœ… í†µê³¼ | Val/Test ë³€ê²½ ì—†ìŒ, Trainë§Œ oversampling |
| 5. Split ê°„ ìœˆë„ìš° ì¤‘ì²© | âœ… í†µê³¼ | ì‹œê°„ ë²”ìœ„ ì™„ì „ ë¶„ë¦¬ |

---

## ğŸ“ íŒŒì¼ êµ¬ì¡°

### Backup (v0 - ì¡°ì • ì „)
```
data/backup_v0/
â”œâ”€â”€ interim/
â”‚   â”œâ”€â”€ file_master_v1.parquet
â”‚   â”œâ”€â”€ quality_report.csv  # 31/60 usable
â”‚   â””â”€â”€ windows_meta_v1.parquet
â””â”€â”€ processed/
    â”œâ”€â”€ windows_balanced_v1.parquet
    â”œâ”€â”€ features_combined_v1.parquet
    â”œâ”€â”€ features_100w_v1.parquet
    â””â”€â”€ features_200w_v1.parquet
```

### Current (v1 - ì¡°ì • í›„)
```
data/
â”œâ”€â”€ interim/
â”‚   â”œâ”€â”€ file_master_v1.parquet
â”‚   â”œâ”€â”€ quality_report.csv  # 57/60 usable âœ…
â”‚   â””â”€â”€ windows_meta_v1.parquet
â””â”€â”€ processed/
    â”œâ”€â”€ windows_balanced_v1.parquet  # ì´í›„ ë¶„ì„ì— ì‚¬ìš©
    â”œâ”€â”€ features_combined_v1.parquet  # ì´í›„ ë¶„ì„ì— ì‚¬ìš©
    â”œâ”€â”€ features_100w_v1.parquet
    â””â”€â”€ features_200w_v1.parquet
```

---

## ğŸ“Š ìµœì¢… ë°ì´í„° í†µê³„

### ì „ì²´ ë¶„í¬

| Split | Normal | Abnormal | Total | Normal:Abnormal |
|-------|--------|----------|-------|----------------|
| Train (balanced) | 160 | 321 | 481 | 1:2.0 âœ… |
| Val | 4 | 88 | 92 | 1:22 |
| Test | 14 | 97 | 111 | 1:6.9 |
| **Total** | **178** | **506** | **684** | **1:2.8** |

### Feature Extraction

- **ì´ ìœˆë„ìš°**: 684ê°œ
- **Features**: 62ê°œ
  - Time-domain: 7 channels Ã— 7 features = 49ê°œ
  - Acc-Sum: 7 features
  - Meta: 2ê°œ (product_100w, direction_cw)

### íŒŒì¼ë³„ ë¶„í¬

| ì œí’ˆ | íŒŒì¼ ìˆ˜ | í’ˆì§ˆ í†µê³¼ | ìœˆë„ìš° ìˆ˜ | ì •ìƒ ìœˆë„ìš° | ë¶ˆëŸ‰ ìœˆë„ìš° |
|------|---------|----------|----------|-----------|-----------|
| 100W | 30 | 30 (100%) | 310 | - | - |
| 200W | 30 | 27 (90%) | 374 | - | - |
| **í•©ê³„** | **60** | **57 (95%)** | **684** | **178** | **506** |

---

## âœ… ë°ì´í„° ë¶„í•  ì›ì¹™ ì¤€ìˆ˜ í™•ì¸

### ì´ë¡ ì  ì›ì¹™ vs ì‹¤ì œ êµ¬í˜„

| ì›ì¹™ | êµ¬í˜„ ë‚´ìš© | ìƒíƒœ |
|------|----------|------|
| **íŒŒì¼ ë‹¨ìœ„ ë¶„í•  ìš°ì„ ** | ë¶ˆëŸ‰ íŒŒì¼ 56ê°œ ëª¨ë‘ íŒŒì¼ ë‹¨ìœ„ ë¶„í•  | âœ… 100% |
| **ì–‘í’ˆ ë¶€ì¡± ì‹œ ì‹œê°„ ê¸°ë°˜** | ì •ìƒ 4ê°œ íŒŒì¼ë§Œ 0-60-80-100% ì‹œê°„ ë¶„í•  | âœ… 100% |
| **ìœˆë„ìš° ê²½ê³„ ì¤€ìˆ˜** | Strict boundary, Â±5% tolerance | âœ… 100% |
| **Balancingì€ trainë§Œ** | Val 92, Test 111 ê·¸ëŒ€ë¡œ ìœ ì§€ | âœ… 100% |
| **ë°ì´í„° ëˆ„ìˆ˜ ì œë¡œ** | Split ê°„ ì‹œê°„ ë²”ìœ„ ì™„ì „ ë¶„ë¦¬ | âœ… 100% |

---

## ğŸ‰ ê²°ë¡ 

### ì£¼ìš” ì„±ê³¼

1. âœ… **í’ˆì§ˆ í†µê³¼ìœ¨ ëŒ€í­ í–¥ìƒ**
   - ì „ì²´: 51.7% â†’ **95.0%** (+43.3%p)
   - 200W: 3.3% â†’ **90.0%** (+86.7%p)

2. âœ… **ì œí’ˆë³„ íŠ¹ì„± ë°˜ì˜**
   - 100W: 53-57ì´ˆ ì¸¡ì • (27k-29k samples)
   - 200W: 62-68ì´ˆ ì¸¡ì • (32k-36k samples)
   - ê° ì œí’ˆì˜ ì •ìƒ ì¸¡ì • ì‹œê°„ ì°¨ì´ë¥¼ ì •í™•íˆ ë°˜ì˜

3. âœ… **ë°ì´í„° ëˆ„ìˆ˜ ì™„ì „ ì°¨ë‹¨**
   - 5ê°€ì§€ ê²€ì¦ í•­ëª© ëª¨ë‘ í†µê³¼
   - Train/Val/Test ì™„ì „ ë…ë¦½ì„± ë³´ì¥

4. âœ… **ì¬í˜„ ê°€ëŠ¥í•œ íŒŒì´í”„ë¼ì¸**
   - ëª¨ë“  ê³¼ì • ìë™í™” ë° ë¬¸ì„œí™”
   - v0 ë°±ì—… ë³´ê´€ìœ¼ë¡œ ë³€ê²½ ì´ë ¥ ì¶”ì  ê°€ëŠ¥

---

### ë‚¨ì€ ì´ìŠˆ

1. **200W Sample02 íŒŒì¼ 3ê°œ ì‹¤íŒ¨**
   - ìƒ˜í”Œ ìˆ˜: 43,689 ~ 59,462 (ë¹„ì •ìƒì ìœ¼ë¡œ ë§ìŒ)
   - ê¶Œì¥: ë°ì´í„° ìˆ˜ì§‘ ê³¼ì • ì ê²€ ë˜ëŠ” ë¶„ì„ì—ì„œ ì œì™¸

2. **Val/Testì˜ ì •ìƒ ìƒ˜í”Œ ë¶€ì¡±**
   - Val: 4ê°œ, Test: 14ê°œ (ë§¤ìš° ì ìŒ)
   - ê¶Œì¥: ì¥ê¸°ì ìœ¼ë¡œ ì •ìƒ ë°ì´í„° ì¶”ê°€ í™•ë³´ í•„ìš”

---

### ë‹¤ìŒ ë‹¨ê³„

1. âœ… **EDA ë¶„ì„** (ë‹¤ìŒ ì‘ì—…)
   - Feature ë¶„í¬ í™•ì¸
   - í´ë˜ìŠ¤ ë¶„ë¦¬ ê°€ëŠ¥ì„± í‰ê°€
   - Outlier ë° ì´ìƒ íŒ¨í„´ íƒì§€

2. ğŸ“Š **Phase 2 ì¤€ë¹„**
   - XGBoost ëª¨ë¸ í•™ìŠµ
   - Frequency domain features ì¶”ê°€
   - Autoencoder ê¸°ë°˜ anomaly detection

3. ğŸ¯ **ëª¨ë¸ í‰ê°€**
   - Val setìœ¼ë¡œ í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹
   - Test setìœ¼ë¡œ ìµœì¢… ì„±ëŠ¥ í‰ê°€

---

## ğŸ“‚ ì°¸ì¡° íŒŒì¼

- **ì„¤ì • íŒŒì¼**: `src/config/params_eda.yaml`
- **í’ˆì§ˆ ê²€ì‚¬ ì½”ë“œ**: `src/preprocess/quality.py`
- **ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸**: `verify_data_leakage.py`
- **íŒŒì´í”„ë¼ì¸**: `run_pipeline.py`
- **ë°±ì—… ë°ì´í„°**: `data/backup_v0/`
- **í˜„ì¬ ë°ì´í„°**: `data/interim/`, `data/processed/`

---

**ë³´ê³ ì„œ ì‘ì„±ì¼**: 2025-11-17
**ì‘ì„±ì**: Claude (AI Assistant)
**ê²€ì¦ ìƒíƒœ**: âœ… ëª¨ë“  ê²€ì¦ í†µê³¼
