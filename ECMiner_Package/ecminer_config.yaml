# ============================================================================
# ECMiner Stage 1 - 레이블 매핑 설정
# ============================================================================

# 사용할 레이블 전략 선택
# - default: 기존 Phase1-3 방식 (소음을 양품으로 포함)
# - strict: 확실한 정상만 양품
# - inclusive: 정상+소음을 양품
label_strategy: "default"

# ============================================================================
# 레이블 매핑 전략 정의
# ============================================================================

strategies:
  # 전략 1: 기본 (기존 Phase1-3 방식)
  default:
    description: "소음을 양품으로 포함하되 약한 가중치 부여"

    # 양품(PASS=1)으로 분류할 라벨
    PASS:
      - "정상"
      - "소음"

    # 불량(FAIL=0)으로 분류할 라벨
    FAIL:
      - "진동"
      - "표기없음"

    # 특별 재분류 규칙
    special_overrides:
      - product: "200W"
        sample: 3
        from: "진동"
        to: "정상"
        reason: "실제 측정 결과 양품으로 확인됨 (Phase1 분석)"

    # 라벨별 가중치 (학습 시 사용)
    weights:
      정상: 1.0
      소음: 0.5      # weak positive (약한 양품)
      진동: 1.0
      표기없음: 1.0

  # 전략 2: 엄격 (확실한 정상만 양품)
  strict:
    description: "정상만 양품, 소음/진동/표기없음 모두 불량"

    PASS:
      - "정상"

    FAIL:
      - "소음"
      - "진동"
      - "표기없음"

    special_overrides:
      - product: "200W"
        sample: 3
        from: "진동"
        to: "정상"
        reason: "실제 측정 결과 양품으로 확인됨"

    weights:
      정상: 1.0
      소음: 1.0
      진동: 1.0
      표기없음: 1.0

  # 전략 3: 포괄적 (정상+소음을 양품)
  inclusive:
    description: "정상과 소음을 모두 양품으로 동등하게 처리"

    PASS:
      - "정상"
      - "소음"

    FAIL:
      - "진동"
      - "표기없음"

    special_overrides:
      - product: "200W"
        sample: 3
        from: "진동"
        to: "정상"
        reason: "실제 측정 결과 양품으로 확인됨"

    weights:
      정상: 1.0
      소음: 1.0      # 소음도 정상과 동일한 가중치
      진동: 1.0
      표기없음: 1.0

# ============================================================================
# RMS 기반 표기없음 재분류 (향후 옵션)
# ============================================================================
# 현재는 비활성화됨. 향후 데이터가 충분히 확보되면 활성화 고려

rms_reclassification:
  enabled: false

  # 활성화 시 설정
  feature: "acc_Y_rms"
  threshold_method: "normal_range"  # mean ± 2*std
  reference_label: "정상"

  # 표기없음 중 정상 범위에 들어가면 양품으로 재분류
  reclassify_to: "정상"

  # 참고: 기존 분석 결과
  # - 표기없음의 80.5%가 정상 RMS 범위 내
  # - 정상 평균: 0.125 ± 0.036
  # - 표기없음 평균: 0.173 ± 0.105
